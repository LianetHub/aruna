(()=>{"use strict";function e(e){return"string"==typeof e||e instanceof String}function t(e){var t;return"object"==typeof e&&null!=e&&"Object"===(null==e||null==(t=e.constructor)?void 0:t.name)}function s(e,t){return Array.isArray(t)?s(e,((e,s)=>t.includes(s))):Object.entries(e).reduce(((e,s)=>{let[i,r]=s;return t(r,i)&&(e[i]=r),e}),{})}const i="NONE",r="LEFT",n="FORCE_LEFT",a="RIGHT",o="FORCE_RIGHT";function u(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function l(e,t){if(t===e)return!0;const s=Array.isArray(t),i=Array.isArray(e);let r;if(s&&i){if(t.length!=e.length)return!1;for(r=0;r<t.length;r++)if(!l(t[r],e[r]))return!1;return!0}if(s!=i)return!1;if(t&&e&&"object"==typeof t&&"object"==typeof e){const s=t instanceof Date,i=e instanceof Date;if(s&&i)return t.getTime()==e.getTime();if(s!=i)return!1;const n=t instanceof RegExp,a=e instanceof RegExp;if(n&&a)return t.toString()==e.toString();if(n!=a)return!1;const o=Object.keys(t);for(r=0;r<o.length;r++)if(!Object.prototype.hasOwnProperty.call(e,o[r]))return!1;for(r=0;r<o.length;r++)if(!l(e[o[r]],t[o[r]]))return!1;return!0}return!(!t||!e||"function"!=typeof t||"function"!=typeof e)&&t.toString()===e.toString()}class h{constructor(e){for(Object.assign(this,e);this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start;if(this.insertedCount)for(;this.value.slice(this.cursorPos)!==this.oldValue.slice(this.oldSelection.end);)this.value.length-this.cursorPos<this.oldValue.length-this.oldSelection.end?++this.oldSelection.end:++this.cursorPos}get startChangePos(){return Math.min(this.cursorPos,this.oldSelection.start)}get insertedCount(){return this.cursorPos-this.startChangePos}get inserted(){return this.value.substr(this.startChangePos,this.insertedCount)}get removedCount(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}get removed(){return this.oldValue.substr(this.startChangePos,this.removedCount)}get head(){return this.value.substring(0,this.startChangePos)}get tail(){return this.value.substring(this.startChangePos+this.insertedCount)}get removeDirection(){return!this.removedCount||this.insertedCount?i:this.oldSelection.end!==this.cursorPos&&this.oldSelection.start!==this.cursorPos||this.oldSelection.end!==this.oldSelection.start?r:a}}function d(e,t){return new d.InputMask(e,t)}function c(t){if(null==t)throw new Error("mask property should be defined");return t instanceof RegExp?d.MaskedRegExp:e(t)?d.MaskedPattern:t===Date?d.MaskedDate:t===Number?d.MaskedNumber:Array.isArray(t)||t===Array?d.MaskedDynamic:d.Masked&&t.prototype instanceof d.Masked?t:d.Masked&&t instanceof d.Masked?t.constructor:t instanceof Function?d.MaskedFunction:(console.warn("Mask not found for mask",t),d.Masked)}function p(e){if(!e)throw new Error("Options in not defined");if(d.Masked){if(e.prototype instanceof d.Masked)return{mask:e};const{mask:i,...r}=e instanceof d.Masked?{mask:e}:t(e)&&e.mask instanceof d.Masked?e:{};if(i){const e=i.mask;return{...s(i,((e,t)=>!t.startsWith("_"))),mask:i.constructor,_mask:e,...r}}}return t(e)?{...e}:{mask:e}}function m(e){if(d.Masked&&e instanceof d.Masked)return e;const t=p(e),s=c(t.mask);if(!s)throw new Error("Masked class is not found for provided mask "+t.mask+", appropriate module needs to be imported manually before creating mask.");return t.mask===s&&delete t.mask,t._mask&&(t.mask=t._mask,delete t._mask),new s(t)}d.createMask=m;class g{get selectionStart(){let e;try{e=this._unsafeSelectionStart}catch{}return null!=e?e:this.value.length}get selectionEnd(){let e;try{e=this._unsafeSelectionEnd}catch{}return null!=e?e:this.value.length}select(e,t){if(null!=e&&null!=t&&(e!==this.selectionStart||t!==this.selectionEnd))try{this._unsafeSelect(e,t)}catch{}}get isActive(){return!1}}d.MaskElement=g;class _ extends g{constructor(e){super(),this.input=e,this._onKeydown=this._onKeydown.bind(this),this._onInput=this._onInput.bind(this),this._onBeforeinput=this._onBeforeinput.bind(this),this._onCompositionEnd=this._onCompositionEnd.bind(this)}get rootElement(){var e,t,s;return null!=(e=null==(t=(s=this.input).getRootNode)?void 0:t.call(s))?e:document}get isActive(){return this.input===this.rootElement.activeElement}bindEvents(e){this.input.addEventListener("keydown",this._onKeydown),this.input.addEventListener("input",this._onInput),this.input.addEventListener("beforeinput",this._onBeforeinput),this.input.addEventListener("compositionend",this._onCompositionEnd),this.input.addEventListener("drop",e.drop),this.input.addEventListener("click",e.click),this.input.addEventListener("focus",e.focus),this.input.addEventListener("blur",e.commit),this._handlers=e}_onKeydown(e){return this._handlers.redo&&(90===e.keyCode&&e.shiftKey&&(e.metaKey||e.ctrlKey)||89===e.keyCode&&e.ctrlKey)?(e.preventDefault(),this._handlers.redo(e)):this._handlers.undo&&90===e.keyCode&&(e.metaKey||e.ctrlKey)?(e.preventDefault(),this._handlers.undo(e)):void(e.isComposing||this._handlers.selectionChange(e))}_onBeforeinput(e){return"historyUndo"===e.inputType&&this._handlers.undo?(e.preventDefault(),this._handlers.undo(e)):"historyRedo"===e.inputType&&this._handlers.redo?(e.preventDefault(),this._handlers.redo(e)):void 0}_onCompositionEnd(e){this._handlers.input(e)}_onInput(e){e.isComposing||this._handlers.input(e)}unbindEvents(){this.input.removeEventListener("keydown",this._onKeydown),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("beforeinput",this._onBeforeinput),this.input.removeEventListener("compositionend",this._onCompositionEnd),this.input.removeEventListener("drop",this._handlers.drop),this.input.removeEventListener("click",this._handlers.click),this.input.removeEventListener("focus",this._handlers.focus),this.input.removeEventListener("blur",this._handlers.commit),this._handlers={}}}d.HTMLMaskElement=_;class f extends _{constructor(e){super(e),this.input=e}get _unsafeSelectionStart(){return null!=this.input.selectionStart?this.input.selectionStart:this.value.length}get _unsafeSelectionEnd(){return this.input.selectionEnd}_unsafeSelect(e,t){this.input.setSelectionRange(e,t)}get value(){return this.input.value}set value(e){this.input.value=e}}d.HTMLMaskElement=_;class k extends _{get _unsafeSelectionStart(){const e=this.rootElement,t=e.getSelection&&e.getSelection(),s=t&&t.anchorOffset,i=t&&t.focusOffset;return null==i||null==s||s<i?s:i}get _unsafeSelectionEnd(){const e=this.rootElement,t=e.getSelection&&e.getSelection(),s=t&&t.anchorOffset,i=t&&t.focusOffset;return null==i||null==s||s>i?s:i}_unsafeSelect(e,t){if(!this.rootElement.createRange)return;const s=this.rootElement.createRange();s.setStart(this.input.firstChild||this.input,e),s.setEnd(this.input.lastChild||this.input,t);const i=this.rootElement,r=i.getSelection&&i.getSelection();r&&(r.removeAllRanges(),r.addRange(s))}get value(){return this.input.textContent||""}set value(e){this.input.textContent=e}}d.HTMLContenteditableMaskElement=k;class v{constructor(){this.states=[],this.currentIndex=0}get currentState(){return this.states[this.currentIndex]}get isEmpty(){return 0===this.states.length}push(e){this.currentIndex<this.states.length-1&&(this.states.length=this.currentIndex+1),this.states.push(e),this.states.length>v.MAX_LENGTH&&this.states.shift(),this.currentIndex=this.states.length-1}go(e){return this.currentIndex=Math.min(Math.max(this.currentIndex+e,0),this.states.length-1),this.currentState}undo(){return this.go(-1)}redo(){return this.go(1)}clear(){this.states.length=0,this.currentIndex=0}}v.MAX_LENGTH=100,d.InputMask=class{constructor(e,t){this.el=e instanceof g?e:e.isContentEditable&&"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName?new k(e):new f(e),this.masked=m(t),this._listeners={},this._value="",this._unmaskedValue="",this._rawInputValue="",this.history=new v,this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this._onUndo=this._onUndo.bind(this),this._onRedo=this._onRedo.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}maskEquals(e){var t;return null==e||(null==(t=this.masked)?void 0:t.maskEquals(e))}get mask(){return this.masked.mask}set mask(e){if(this.maskEquals(e))return;if(!(e instanceof d.Masked)&&this.masked.constructor===c(e))return void this.masked.updateOptions({mask:e});const t=e instanceof d.Masked?e:m({mask:e});t.unmaskedValue=this.masked.unmaskedValue,this.masked=t}get value(){return this._value}set value(e){this.value!==e&&(this.masked.value=e,this.updateControl("auto"))}get unmaskedValue(){return this._unmaskedValue}set unmaskedValue(e){this.unmaskedValue!==e&&(this.masked.unmaskedValue=e,this.updateControl("auto"))}get rawInputValue(){return this._rawInputValue}set rawInputValue(e){this.rawInputValue!==e&&(this.masked.rawInputValue=e,this.updateControl(),this.alignCursor())}get typedValue(){return this.masked.typedValue}set typedValue(e){this.masked.typedValueEquals(e)||(this.masked.typedValue=e,this.updateControl("auto"))}get displayValue(){return this.masked.displayValue}_bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange,undo:this._onUndo,redo:this._onRedo})}_unbindEvents(){this.el&&this.el.unbindEvents()}_fireEvent(e,t){const s=this._listeners[e];s&&s.forEach((e=>e(t)))}get selectionStart(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}get cursorPos(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd}set cursorPos(e){this.el&&this.el.isActive&&(this.el.select(e,e),this._saveSelection())}_saveSelection(){this.displayValue!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}updateValue(){this.masked.value=this.el.value,this._value=this.masked.value,this._unmaskedValue=this.masked.unmaskedValue,this._rawInputValue=this.masked.rawInputValue}updateControl(e){const t=this.masked.unmaskedValue,s=this.masked.value,i=this.masked.rawInputValue,r=this.displayValue,n=this.unmaskedValue!==t||this.value!==s||this._rawInputValue!==i;this._unmaskedValue=t,this._value=s,this._rawInputValue=i,this.el.value!==r&&(this.el.value=r),"auto"===e?this.alignCursor():null!=e&&(this.cursorPos=e),n&&this._fireChangeEvents(),this._historyChanging||!n&&!this.history.isEmpty||this.history.push({unmaskedValue:t,selection:{start:this.selectionStart,end:this.cursorPos}})}updateOptions(e){const{mask:t,...s}=e,i=!this.maskEquals(t),r=this.masked.optionsIsChanged(s);i&&(this.mask=t),r&&this.masked.updateOptions(s),(i||r)&&this.updateControl()}updateCursor(e){null!=e&&(this.cursorPos=e,this._delayUpdateCursor(e))}_delayUpdateCursor(e){this._abortUpdateCursor(),this._changingCursorPos=e,this._cursorChanging=setTimeout((()=>{this.el&&(this.cursorPos=this._changingCursorPos,this._abortUpdateCursor())}),10)}_fireChangeEvents(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}_abortUpdateCursor(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,r))}alignCursorFriendly(){this.selectionStart===this.cursorPos&&this.alignCursor()}on(e,t){return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),this}off(e,t){if(!this._listeners[e])return this;if(!t)return delete this._listeners[e],this;const s=this._listeners[e].indexOf(t);return s>=0&&this._listeners[e].splice(s,1),this}_onInput(e){this._inputEvent=e,this._abortUpdateCursor();const t=new h({value:this.el.value,cursorPos:this.cursorPos,oldValue:this.displayValue,oldSelection:this._selection}),s=this.masked.rawInputValue,r=this.masked.splice(t.startChangePos,t.removed.length,t.inserted,t.removeDirection,{input:!0,raw:!0}).offset,n=s===this.masked.rawInputValue?t.removeDirection:i;let a=this.masked.nearestInputPos(t.startChangePos+r,n);n!==i&&(a=this.masked.nearestInputPos(a,i)),this.updateControl(a),delete this._inputEvent}_onChange(){this.displayValue!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}_onDrop(e){e.preventDefault(),e.stopPropagation()}_onFocus(e){this.alignCursorFriendly()}_onClick(e){this.alignCursorFriendly()}_onUndo(){this._applyHistoryState(this.history.undo())}_onRedo(){this._applyHistoryState(this.history.redo())}_applyHistoryState(e){e&&(this._historyChanging=!0,this.unmaskedValue=e.unmaskedValue,this.el.select(e.selection.start,e.selection.end),this._saveSelection(),this._historyChanging=!1)}destroy(){this._unbindEvents(),this._listeners.length=0,delete this.el}};class b{static normalize(e){return Array.isArray(e)?e:[e,new b]}constructor(e){Object.assign(this,{inserted:"",rawInserted:"",tailShift:0,skip:!1},e)}aggregate(e){return this.inserted+=e.inserted,this.rawInserted+=e.rawInserted,this.tailShift+=e.tailShift,this.skip=this.skip||e.skip,this}get offset(){return this.tailShift+this.inserted.length}get consumed(){return Boolean(this.rawInserted)||this.skip}equals(e){return this.inserted===e.inserted&&this.tailShift===e.tailShift&&this.rawInserted===e.rawInserted&&this.skip===e.skip}}d.ChangeDetails=b;class A{constructor(e,t,s){void 0===e&&(e=""),void 0===t&&(t=0),this.value=e,this.from=t,this.stop=s}toString(){return this.value}extend(e){this.value+=String(e)}appendTo(e){return e.append(this.toString(),{tail:!0}).aggregate(e._appendPlaceholder())}get state(){return{value:this.value,from:this.from,stop:this.stop}}set state(e){Object.assign(this,e)}unshift(e){if(!this.value.length||null!=e&&this.from>=e)return"";const t=this.value[0];return this.value=this.value.slice(1),t}shift(){if(!this.value.length)return"";const e=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),e}}class y{constructor(e){this._value="",this._update({...y.DEFAULTS,...e}),this._initialized=!0}updateOptions(e){this.optionsIsChanged(e)&&this.withValueRefresh(this._update.bind(this,e))}_update(e){Object.assign(this,e)}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value}reset(){this._value=""}get value(){return this._value}set value(e){this.resolve(e,{input:!0})}resolve(e,t){void 0===t&&(t={input:!0}),this.reset(),this.append(e,t,""),this.doCommit()}get unmaskedValue(){return this.value}set unmaskedValue(e){this.resolve(e,{})}get typedValue(){return this.parse?this.parse(this.value,this):this.unmaskedValue}set typedValue(e){this.format?this.value=this.format(e,this):this.unmaskedValue=String(e)}get rawInputValue(){return this.extractInput(0,this.displayValue.length,{raw:!0})}set rawInputValue(e){this.resolve(e,{raw:!0})}get displayValue(){return this.value}get isComplete(){return!0}get isFilled(){return this.isComplete}nearestInputPos(e,t){return e}totalInputPositions(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),Math.min(this.displayValue.length,t-e)}extractInput(e,t,s){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),this.displayValue.slice(e,t)}extractTail(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),new A(this.extractInput(e,t),e)}appendTail(t){return e(t)&&(t=new A(String(t))),t.appendTo(this)}_appendCharRaw(e,t){return e?(this._value+=e,new b({inserted:e,rawInserted:e})):new b}_appendChar(e,t,s){void 0===t&&(t={});const i=this.state;let r;if([e,r]=this.doPrepareChar(e,t),e&&(r=r.aggregate(this._appendCharRaw(e,t)),!r.rawInserted&&"pad"===this.autofix)){const s=this.state;this.state=i;let n=this.pad(t);const a=this._appendCharRaw(e,t);n=n.aggregate(a),a.rawInserted||n.equals(r)?r=n:this.state=s}if(r.inserted){let e,n=!1!==this.doValidate(t);if(n&&null!=s){const t=this.state;if(!0===this.overwrite){e=s.state;for(let e=0;e<r.rawInserted.length;++e)s.unshift(this.displayValue.length-r.tailShift)}let i=this.appendTail(s);if(n=i.rawInserted.length===s.toString().length,!(n&&i.inserted||"shift"!==this.overwrite)){this.state=t,e=s.state;for(let e=0;e<r.rawInserted.length;++e)s.shift();i=this.appendTail(s),n=i.rawInserted.length===s.toString().length}n&&i.inserted&&(this.state=t)}n||(r=new b,this.state=i,s&&e&&(s.state=e))}return r}_appendPlaceholder(){return new b}_appendEager(){return new b}append(t,s,i){if(!e(t))throw new Error("value should be string");const r=e(i)?new A(String(i)):i;let n;null!=s&&s.tail&&(s._beforeTailState=this.state),[t,n]=this.doPrepare(t,s);for(let e=0;e<t.length;++e){const i=this._appendChar(t[e],s,r);if(!i.rawInserted&&!this.doSkipInvalid(t[e],s,r))break;n.aggregate(i)}return(!0===this.eager||"append"===this.eager)&&null!=s&&s.input&&t&&n.aggregate(this._appendEager()),null!=r&&(n.tailShift+=this.appendTail(r).tailShift),n}remove(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),this._value=this.displayValue.slice(0,e)+this.displayValue.slice(t),new b}withValueRefresh(e){if(this._refreshing||!this._initialized)return e();this._refreshing=!0;const t=this.rawInputValue,s=this.value,i=e();return this.rawInputValue=t,this.value&&this.value!==s&&0===s.indexOf(this.value)&&(this.append(s.slice(this.displayValue.length),{},""),this.doCommit()),delete this._refreshing,i}runIsolated(e){if(this._isolated||!this._initialized)return e(this);this._isolated=!0;const t=this.state,s=e(this);return this.state=t,delete this._isolated,s}doSkipInvalid(e,t,s){return Boolean(this.skipInvalid)}doPrepare(e,t){return void 0===t&&(t={}),b.normalize(this.prepare?this.prepare(e,this,t):e)}doPrepareChar(e,t){return void 0===t&&(t={}),b.normalize(this.prepareChar?this.prepareChar(e,this,t):e)}doValidate(e){return(!this.validate||this.validate(this.value,this,e))&&(!this.parent||this.parent.doValidate(e))}doCommit(){this.commit&&this.commit(this.value,this)}splice(e,t,s,u,l){void 0===s&&(s=""),void 0===u&&(u=i),void 0===l&&(l={input:!0});const h=e+t,d=this.extractTail(h),c=!0===this.eager||"remove"===this.eager;let p;c&&(u=function(e){switch(e){case r:return n;case a:return o;default:return e}}(u),p=this.extractInput(0,h,{raw:!0}));let m=e;const g=new b;if(u!==i&&(m=this.nearestInputPos(e,t>1&&0!==e&&!c?i:u),g.tailShift=m-e),g.aggregate(this.remove(m)),c&&u!==i&&p===this.rawInputValue)if(u===n){let e;for(;p===this.rawInputValue&&(e=this.displayValue.length);)g.aggregate(new b({tailShift:-1})).aggregate(this.remove(e-1))}else u===o&&d.unshift();return g.aggregate(this.append(s,l,d))}maskEquals(e){return this.mask===e}optionsIsChanged(e){return!l(this,e)}typedValueEquals(e){const t=this.typedValue;return e===t||y.EMPTY_VALUES.includes(e)&&y.EMPTY_VALUES.includes(t)||!!this.format&&this.format(e,this)===this.format(this.typedValue,this)}pad(e){return new b}}y.DEFAULTS={skipInvalid:!0},y.EMPTY_VALUES=[void 0,null,""],d.Masked=y;class E{constructor(e,t){void 0===e&&(e=[]),void 0===t&&(t=0),this.chunks=e,this.from=t}toString(){return this.chunks.map(String).join("")}extend(t){if(!String(t))return;t=e(t)?new A(String(t)):t;const s=this.chunks[this.chunks.length-1],i=s&&(s.stop===t.stop||null==t.stop)&&t.from===s.from+s.toString().length;if(t instanceof A)i?s.extend(t.toString()):this.chunks.push(t);else if(t instanceof E){if(null==t.stop){let e;for(;t.chunks.length&&null==t.chunks[0].stop;)e=t.chunks.shift(),e.from+=t.from,this.extend(e)}t.toString()&&(t.stop=t.blockIndex,this.chunks.push(t))}}appendTo(e){if(!(e instanceof d.MaskedPattern))return new A(this.toString()).appendTo(e);const t=new b;for(let s=0;s<this.chunks.length;++s){const i=this.chunks[s],r=e._mapPosToBlock(e.displayValue.length),n=i.stop;let a;if(null!=n&&(!r||r.index<=n)&&((i instanceof E||e._stops.indexOf(n)>=0)&&t.aggregate(e._appendPlaceholder(n)),a=i instanceof E&&e._blocks[n]),a){const s=a.appendTail(i);t.aggregate(s);const r=i.toString().slice(s.rawInserted.length);r&&t.aggregate(e.append(r,{tail:!0}))}else t.aggregate(e.append(i.toString(),{tail:!0}))}return t}get state(){return{chunks:this.chunks.map((e=>e.state)),from:this.from,stop:this.stop,blockIndex:this.blockIndex}}set state(e){const{chunks:t,...s}=e;Object.assign(this,s),this.chunks=t.map((e=>{const t="chunks"in e?new E:new A;return t.state=e,t}))}unshift(e){if(!this.chunks.length||null!=e&&this.from>=e)return"";const t=null!=e?e-this.from:e;let s=0;for(;s<this.chunks.length;){const e=this.chunks[s],i=e.unshift(t);if(e.toString()){if(!i)break;++s}else this.chunks.splice(s,1);if(i)return i}return""}shift(){if(!this.chunks.length)return"";let e=this.chunks.length-1;for(;0<=e;){const t=this.chunks[e],s=t.shift();if(t.toString()){if(!s)break;--e}else this.chunks.splice(e,1);if(s)return s}return""}}class S{constructor(e,t){this.masked=e,this._log=[];const{offset:s,index:i}=e._mapPosToBlock(t)||(t<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0});this.offset=s,this.index=i,this.ok=!1}get block(){return this.masked._blocks[this.index]}get pos(){return this.masked._blockStartPos(this.index)+this.offset}get state(){return{index:this.index,offset:this.offset,ok:this.ok}}set state(e){Object.assign(this,e)}pushState(){this._log.push(this.state)}popState(){const e=this._log.pop();return e&&(this.state=e),e}bindBlock(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.displayValue.length))}_pushLeft(e){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=(null==(t=this.block)?void 0:t.displayValue.length)||0){var t;if(e())return this.ok=!0}return this.ok=!1}_pushRight(e){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(e())return this.ok=!0;return this.ok=!1}pushLeftBeforeFilled(){return this._pushLeft((()=>{if(!this.block.isFixed&&this.block.value)return this.offset=this.block.nearestInputPos(this.offset,n),0!==this.offset||void 0}))}pushLeftBeforeInput(){return this._pushLeft((()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,r),!0}))}pushLeftBeforeRequired(){return this._pushLeft((()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,r),!0}))}pushRightBeforeFilled(){return this._pushRight((()=>{if(!this.block.isFixed&&this.block.value)return this.offset=this.block.nearestInputPos(this.offset,o),this.offset!==this.block.value.length||void 0}))}pushRightBeforeInput(){return this._pushRight((()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,i),!0}))}pushRightBeforeRequired(){return this._pushRight((()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,i),!0}))}}class C{constructor(e){Object.assign(this,e),this._value="",this.isFixed=!0}get value(){return this._value}get unmaskedValue(){return this.isUnmasking?this.value:""}get rawInputValue(){return this._isRawInput?this.value:""}get displayValue(){return this.value}reset(){this._isRawInput=!1,this._value=""}remove(e,t){return void 0===e&&(e=0),void 0===t&&(t=this._value.length),this._value=this._value.slice(0,e)+this._value.slice(t),this._value||(this._isRawInput=!1),new b}nearestInputPos(e,t){void 0===t&&(t=i);const s=this._value.length;switch(t){case r:case n:return 0;default:return s}}totalInputPositions(e,t){return void 0===e&&(e=0),void 0===t&&(t=this._value.length),this._isRawInput?t-e:0}extractInput(e,t,s){return void 0===e&&(e=0),void 0===t&&(t=this._value.length),void 0===s&&(s={}),s.raw&&this._isRawInput&&this._value.slice(e,t)||""}get isComplete(){return!0}get isFilled(){return Boolean(this._value)}_appendChar(e,t){if(void 0===t&&(t={}),this.isFilled)return new b;const s=!0===this.eager||"append"===this.eager,i=this.char===e&&(this.isUnmasking||t.input||t.raw)&&(!t.raw||!s)&&!t.tail,r=new b({inserted:this.char,rawInserted:i?this.char:""});return this._value=this.char,this._isRawInput=i&&(t.raw||t.input),r}_appendEager(){return this._appendChar(this.char,{tail:!0})}_appendPlaceholder(){const e=new b;return this.isFilled||(this._value=e.inserted=this.char),e}extractTail(){return new A("")}appendTail(t){return e(t)&&(t=new A(String(t))),t.appendTo(this)}append(e,t,s){const i=this._appendChar(e[0],t);return null!=s&&(i.tailShift+=this.appendTail(s).tailShift),i}doCommit(){}get state(){return{_value:this._value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value,this._isRawInput=Boolean(e._rawInputValue)}pad(e){return this._appendPlaceholder()}}class w{constructor(e){const{parent:t,isOptional:s,placeholderChar:i,displayChar:r,lazy:n,eager:a,...o}=e;this.masked=m(o),Object.assign(this,{parent:t,isOptional:s,placeholderChar:i,displayChar:r,lazy:n,eager:a})}reset(){this.isFilled=!1,this.masked.reset()}remove(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),0===e&&t>=1?(this.isFilled=!1,this.masked.remove(e,t)):new b}get value(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}get unmaskedValue(){return this.masked.unmaskedValue}get rawInputValue(){return this.masked.rawInputValue}get displayValue(){return this.masked.value&&this.displayChar||this.value}get isComplete(){return Boolean(this.masked.value)||this.isOptional}_appendChar(e,t){if(void 0===t&&(t={}),this.isFilled)return new b;const s=this.masked.state;let i=this.masked._appendChar(e,this.currentMaskFlags(t));return i.inserted&&!1===this.doValidate(t)&&(i=new b,this.masked.state=s),i.inserted||this.isOptional||this.lazy||t.input||(i.inserted=this.placeholderChar),i.skip=!i.inserted&&!this.isOptional,this.isFilled=Boolean(i.inserted),i}append(e,t,s){return this.masked.append(e,this.currentMaskFlags(t),s)}_appendPlaceholder(){return this.isFilled||this.isOptional?new b:(this.isFilled=!0,new b({inserted:this.placeholderChar}))}_appendEager(){return new b}extractTail(e,t){return this.masked.extractTail(e,t)}appendTail(e){return this.masked.appendTail(e)}extractInput(e,t,s){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),this.masked.extractInput(e,t,s)}nearestInputPos(e,t){void 0===t&&(t=i);const s=this.value.length,u=Math.min(Math.max(e,0),s);switch(t){case r:case n:return this.isComplete?u:0;case a:case o:return this.isComplete?u:s;default:return u}}totalInputPositions(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),this.value.slice(e,t).length}doValidate(e){return this.masked.doValidate(this.currentMaskFlags(e))&&(!this.parent||this.parent.doValidate(this.currentMaskFlags(e)))}doCommit(){this.masked.doCommit()}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue,masked:this.masked.state,isFilled:this.isFilled}}set state(e){this.masked.state=e.masked,this.isFilled=e.isFilled}currentMaskFlags(e){var t;return{...e,_beforeTailState:(null==e||null==(t=e._beforeTailState)?void 0:t.masked)||(null==e?void 0:e._beforeTailState)}}pad(e){return new b}}w.DEFAULT_DEFINITIONS={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./},d.MaskedRegExp=class extends y{updateOptions(e){super.updateOptions(e)}_update(e){const t=e.mask;t&&(e.validate=e=>e.search(t)>=0),super._update(e)}};class x extends y{constructor(e){super({...x.DEFAULTS,...e,definitions:Object.assign({},w.DEFAULT_DEFINITIONS,null==e?void 0:e.definitions)})}updateOptions(e){super.updateOptions(e)}_update(e){e.definitions=Object.assign({},this.definitions,e.definitions),super._update(e),this._rebuildMask()}_rebuildMask(){const e=this.definitions;this._blocks=[],this.exposeBlock=void 0,this._stops=[],this._maskedBlocks={};const t=this.mask;if(!t||!e)return;let s=!1,i=!1;for(let r=0;r<t.length;++r){if(this.blocks){const e=t.slice(r),s=Object.keys(this.blocks).filter((t=>0===e.indexOf(t)));s.sort(((e,t)=>t.length-e.length));const i=s[0];if(i){const{expose:e,repeat:t,...s}=p(this.blocks[i]),n={lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,overwrite:this.overwrite,autofix:this.autofix,...s,repeat:t,parent:this},a=null!=t?new d.RepeatBlock(n):m(n);a&&(this._blocks.push(a),e&&(this.exposeBlock=a),this._maskedBlocks[i]||(this._maskedBlocks[i]=[]),this._maskedBlocks[i].push(this._blocks.length-1)),r+=i.length-1;continue}}let n=t[r],a=n in e;if(n===x.STOP_CHAR){this._stops.push(this._blocks.length);continue}if("{"===n||"}"===n){s=!s;continue}if("["===n||"]"===n){i=!i;continue}if(n===x.ESCAPE_CHAR){if(++r,n=t[r],!n)break;a=!1}const o=a?new w({isOptional:i,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,...p(e[n]),parent:this}):new C({char:n,eager:this.eager,isUnmasking:s});this._blocks.push(o)}}get state(){return{...super.state,_blocks:this._blocks.map((e=>e.state))}}set state(e){if(!e)return void this.reset();const{_blocks:t,...s}=e;this._blocks.forEach(((e,s)=>e.state=t[s])),super.state=s}reset(){super.reset(),this._blocks.forEach((e=>e.reset()))}get isComplete(){return this.exposeBlock?this.exposeBlock.isComplete:this._blocks.every((e=>e.isComplete))}get isFilled(){return this._blocks.every((e=>e.isFilled))}get isFixed(){return this._blocks.every((e=>e.isFixed))}get isOptional(){return this._blocks.every((e=>e.isOptional))}doCommit(){this._blocks.forEach((e=>e.doCommit())),super.doCommit()}get unmaskedValue(){return this.exposeBlock?this.exposeBlock.unmaskedValue:this._blocks.reduce(((e,t)=>e+t.unmaskedValue),"")}set unmaskedValue(e){if(this.exposeBlock){const t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.unmaskedValue=e,this.appendTail(t),this.doCommit()}else super.unmaskedValue=e}get value(){return this.exposeBlock?this.exposeBlock.value:this._blocks.reduce(((e,t)=>e+t.value),"")}set value(e){if(this.exposeBlock){const t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.value=e,this.appendTail(t),this.doCommit()}else super.value=e}get typedValue(){return this.exposeBlock?this.exposeBlock.typedValue:super.typedValue}set typedValue(e){if(this.exposeBlock){const t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.typedValue=e,this.appendTail(t),this.doCommit()}else super.typedValue=e}get displayValue(){return this._blocks.reduce(((e,t)=>e+t.displayValue),"")}appendTail(e){return super.appendTail(e).aggregate(this._appendPlaceholder())}_appendEager(){var e;const t=new b;let s=null==(e=this._mapPosToBlock(this.displayValue.length))?void 0:e.index;if(null==s)return t;this._blocks[s].isFilled&&++s;for(let e=s;e<this._blocks.length;++e){const s=this._blocks[e]._appendEager();if(!s.inserted)break;t.aggregate(s)}return t}_appendCharRaw(e,t){void 0===t&&(t={});const s=this._mapPosToBlock(this.displayValue.length),i=new b;if(!s)return i;for(let n,a=s.index;n=this._blocks[a];++a){var r;const s=n._appendChar(e,{...t,_beforeTailState:null==(r=t._beforeTailState)||null==(r=r._blocks)?void 0:r[a]});if(i.aggregate(s),s.consumed)break}return i}extractTail(e,t){void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length);const s=new E;return e===t||this._forEachBlocksInRange(e,t,((e,t,i,r)=>{const n=e.extractTail(i,r);n.stop=this._findStopBefore(t),n.from=this._blockStartPos(t),n instanceof E&&(n.blockIndex=t),s.extend(n)})),s}extractInput(e,t,s){if(void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),void 0===s&&(s={}),e===t)return"";let i="";return this._forEachBlocksInRange(e,t,((e,t,r,n)=>{i+=e.extractInput(r,n,s)})),i}_findStopBefore(e){let t;for(let s=0;s<this._stops.length;++s){const i=this._stops[s];if(!(i<=e))break;t=i}return t}_appendPlaceholder(e){const t=new b;if(this.lazy&&null==e)return t;const s=this._mapPosToBlock(this.displayValue.length);if(!s)return t;const i=s.index,r=null!=e?e:this._blocks.length;return this._blocks.slice(i,r).forEach((s=>{var i;s.lazy&&null==e||t.aggregate(s._appendPlaceholder(null==(i=s._blocks)?void 0:i.length))})),t}_mapPosToBlock(e){let t="";for(let s=0;s<this._blocks.length;++s){const i=this._blocks[s],r=t.length;if(t+=i.displayValue,e<=t.length)return{index:s,offset:e-r}}}_blockStartPos(e){return this._blocks.slice(0,e).reduce(((e,t)=>e+t.displayValue.length),0)}_forEachBlocksInRange(e,t,s){void 0===t&&(t=this.displayValue.length);const i=this._mapPosToBlock(e);if(i){const e=this._mapPosToBlock(t),r=e&&i.index===e.index,n=i.offset,a=e&&r?e.offset:this._blocks[i.index].displayValue.length;if(s(this._blocks[i.index],i.index,n,a),e&&!r){for(let t=i.index+1;t<e.index;++t)s(this._blocks[t],t,0,this._blocks[t].displayValue.length);s(this._blocks[e.index],e.index,0,e.offset)}}}remove(e,t){void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length);const s=super.remove(e,t);return this._forEachBlocksInRange(e,t,((e,t,i,r)=>{s.aggregate(e.remove(i,r))})),s}nearestInputPos(e,t){if(void 0===t&&(t=i),!this._blocks.length)return 0;const s=new S(this,e);if(t===i)return s.pushRightBeforeInput()?s.pos:(s.popState(),s.pushLeftBeforeInput()?s.pos:this.displayValue.length);if(t===r||t===n){if(t===r){if(s.pushRightBeforeFilled(),s.ok&&s.pos===e)return e;s.popState()}if(s.pushLeftBeforeInput(),s.pushLeftBeforeRequired(),s.pushLeftBeforeFilled(),t===r){if(s.pushRightBeforeInput(),s.pushRightBeforeRequired(),s.ok&&s.pos<=e)return s.pos;if(s.popState(),s.ok&&s.pos<=e)return s.pos;s.popState()}return s.ok?s.pos:t===n?0:(s.popState(),s.ok?s.pos:(s.popState(),s.ok?s.pos:0))}return t===a||t===o?(s.pushRightBeforeInput(),s.pushRightBeforeRequired(),s.pushRightBeforeFilled()?s.pos:t===o?this.displayValue.length:(s.popState(),s.ok?s.pos:(s.popState(),s.ok?s.pos:this.nearestInputPos(e,r)))):e}totalInputPositions(e,t){void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length);let s=0;return this._forEachBlocksInRange(e,t,((e,t,i,r)=>{s+=e.totalInputPositions(i,r)})),s}maskedBlock(e){return this.maskedBlocks(e)[0]}maskedBlocks(e){const t=this._maskedBlocks[e];return t?t.map((e=>this._blocks[e])):[]}pad(e){const t=new b;return this._forEachBlocksInRange(0,this.displayValue.length,(s=>t.aggregate(s.pad(e)))),t}}x.DEFAULTS={...y.DEFAULTS,lazy:!0,placeholderChar:"_"},x.STOP_CHAR="`",x.ESCAPE_CHAR="\\",x.InputDefinition=w,x.FixedDefinition=C,d.MaskedPattern=x;class F extends x{get _matchFrom(){return this.maxLength-String(this.from).length}constructor(e){super(e)}updateOptions(e){super.updateOptions(e)}_update(e){const{to:t=this.to||0,from:s=this.from||0,maxLength:i=this.maxLength||0,autofix:r=this.autofix,...n}=e;this.to=t,this.from=s,this.maxLength=Math.max(String(t).length,i),this.autofix=r;const a=String(this.from).padStart(this.maxLength,"0"),o=String(this.to).padStart(this.maxLength,"0");let u=0;for(;u<o.length&&o[u]===a[u];)++u;n.mask=o.slice(0,u).replace(/0/g,"\\0")+"0".repeat(this.maxLength-u),super._update(n)}get isComplete(){return super.isComplete&&Boolean(this.value)}boundaries(e){let t="",s="";const[,i,r]=e.match(/^(\D*)(\d*)(\D*)/)||[];return r&&(t="0".repeat(i.length)+r,s="9".repeat(i.length)+r),t=t.padEnd(this.maxLength,"0"),s=s.padEnd(this.maxLength,"9"),[t,s]}doPrepareChar(e,t){let s;return void 0===t&&(t={}),[e,s]=super.doPrepareChar(e.replace(/\D/g,""),t),e||(s.skip=!this.isComplete),[e,s]}_appendCharRaw(e,t){if(void 0===t&&(t={}),!this.autofix||this.value.length+1>this.maxLength)return super._appendCharRaw(e,t);const s=String(this.from).padStart(this.maxLength,"0"),i=String(this.to).padStart(this.maxLength,"0"),[r,n]=this.boundaries(this.value+e);return Number(n)<this.from?super._appendCharRaw(s[this.value.length],t):Number(r)>this.to?!t.tail&&"pad"===this.autofix&&this.value.length+1<this.maxLength?super._appendCharRaw(s[this.value.length],t).aggregate(this._appendCharRaw(e,t)):super._appendCharRaw(i[this.value.length],t):super._appendCharRaw(e,t)}doValidate(e){const t=this.value;if(-1===t.search(/[^0]/)&&t.length<=this._matchFrom)return!0;const[s,i]=this.boundaries(t);return this.from<=Number(i)&&Number(s)<=this.to&&super.doValidate(e)}pad(e){const t=new b;if(this.value.length===this.maxLength)return t;const s=this.value,i=this.maxLength-this.value.length;if(i){this.reset();for(let s=0;s<i;++s)t.aggregate(super._appendCharRaw("0",e));s.split("").forEach((e=>this._appendCharRaw(e)))}return t}}d.MaskedRange=F;class B extends x{static extractPatternOptions(t){const{mask:s,pattern:i,...r}=t;return{...r,mask:e(s)?s:i}}constructor(e){super(B.extractPatternOptions({...B.DEFAULTS,...e}))}updateOptions(e){super.updateOptions(e)}_update(t){const{mask:s,pattern:i,blocks:r,...n}={...B.DEFAULTS,...t},a=Object.assign({},B.GET_DEFAULT_BLOCKS());t.min&&(a.Y.from=t.min.getFullYear()),t.max&&(a.Y.to=t.max.getFullYear()),t.min&&t.max&&a.Y.from===a.Y.to&&(a.m.from=t.min.getMonth()+1,a.m.to=t.max.getMonth()+1,a.m.from===a.m.to&&(a.d.from=t.min.getDate(),a.d.to=t.max.getDate())),Object.assign(a,this.blocks,r),super._update({...n,mask:e(s)?s:i,blocks:a})}doValidate(e){const t=this.date;return super.doValidate(e)&&(!this.isComplete||this.isDateExist(this.value)&&null!=t&&(null==this.min||this.min<=t)&&(null==this.max||t<=this.max))}isDateExist(e){return this.format(this.parse(e,this),this).indexOf(e)>=0}get date(){return this.typedValue}set date(e){this.typedValue=e}get typedValue(){return this.isComplete?super.typedValue:null}set typedValue(e){super.typedValue=e}maskEquals(e){return e===Date||super.maskEquals(e)}optionsIsChanged(e){return super.optionsIsChanged(B.extractPatternOptions(e))}}B.GET_DEFAULT_BLOCKS=()=>({d:{mask:F,from:1,to:31,maxLength:2},m:{mask:F,from:1,to:12,maxLength:2},Y:{mask:F,from:1900,to:9999}}),B.DEFAULTS={...x.DEFAULTS,mask:Date,pattern:"d{.}`m{.}`Y",format:(e,t)=>e?[String(e.getDate()).padStart(2,"0"),String(e.getMonth()+1).padStart(2,"0"),e.getFullYear()].join("."):"",parse:(e,t)=>{const[s,i,r]=e.split(".").map(Number);return new Date(r,i-1,s)}},d.MaskedDate=B;class D extends y{constructor(e){super({...D.DEFAULTS,...e}),this.currentMask=void 0}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),"mask"in e&&(this.exposeMask=void 0,this.compiledMasks=Array.isArray(e.mask)?e.mask.map((e=>{const{expose:t,...s}=p(e),i=m({overwrite:this._overwrite,eager:this._eager,skipInvalid:this._skipInvalid,...s});return t&&(this.exposeMask=i),i})):[])}_appendCharRaw(e,t){void 0===t&&(t={});const s=this._applyDispatch(e,t);return this.currentMask&&s.aggregate(this.currentMask._appendChar(e,this.currentMaskFlags(t))),s}_applyDispatch(e,t,s){void 0===e&&(e=""),void 0===t&&(t={}),void 0===s&&(s="");const i=t.tail&&null!=t._beforeTailState?t._beforeTailState._value:this.value,r=this.rawInputValue,n=t.tail&&null!=t._beforeTailState?t._beforeTailState._rawInputValue:r,a=r.slice(n.length),o=this.currentMask,u=new b,l=null==o?void 0:o.state;return this.currentMask=this.doDispatch(e,{...t},s),this.currentMask&&(this.currentMask!==o?(this.currentMask.reset(),n&&(this.currentMask.append(n,{raw:!0}),u.tailShift=this.currentMask.value.length-i.length),a&&(u.tailShift+=this.currentMask.append(a,{raw:!0,tail:!0}).tailShift)):l&&(this.currentMask.state=l)),u}_appendPlaceholder(){const e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendPlaceholder()),e}_appendEager(){const e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendEager()),e}appendTail(e){const t=new b;return e&&t.aggregate(this._applyDispatch("",{},e)),t.aggregate(this.currentMask?this.currentMask.appendTail(e):super.appendTail(e))}currentMaskFlags(e){var t,s;return{...e,_beforeTailState:(null==(t=e._beforeTailState)?void 0:t.currentMaskRef)===this.currentMask&&(null==(s=e._beforeTailState)?void 0:s.currentMask)||e._beforeTailState}}doDispatch(e,t,s){return void 0===t&&(t={}),void 0===s&&(s=""),this.dispatch(e,this,t,s)}doValidate(e){return super.doValidate(e)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(e)))}doPrepare(e,t){void 0===t&&(t={});let[s,i]=super.doPrepare(e,t);if(this.currentMask){let e;[s,e]=super.doPrepare(s,this.currentMaskFlags(t)),i=i.aggregate(e)}return[s,i]}doPrepareChar(e,t){void 0===t&&(t={});let[s,i]=super.doPrepareChar(e,t);if(this.currentMask){let e;[s,e]=super.doPrepareChar(s,this.currentMaskFlags(t)),i=i.aggregate(e)}return[s,i]}reset(){var e;null==(e=this.currentMask)||e.reset(),this.compiledMasks.forEach((e=>e.reset()))}get value(){return this.exposeMask?this.exposeMask.value:this.currentMask?this.currentMask.value:""}set value(e){this.exposeMask?(this.exposeMask.value=e,this.currentMask=this.exposeMask,this._applyDispatch()):super.value=e}get unmaskedValue(){return this.exposeMask?this.exposeMask.unmaskedValue:this.currentMask?this.currentMask.unmaskedValue:""}set unmaskedValue(e){this.exposeMask?(this.exposeMask.unmaskedValue=e,this.currentMask=this.exposeMask,this._applyDispatch()):super.unmaskedValue=e}get typedValue(){return this.exposeMask?this.exposeMask.typedValue:this.currentMask?this.currentMask.typedValue:""}set typedValue(e){if(this.exposeMask)return this.exposeMask.typedValue=e,this.currentMask=this.exposeMask,void this._applyDispatch();let t=String(e);this.currentMask&&(this.currentMask.typedValue=e,t=this.currentMask.unmaskedValue),this.unmaskedValue=t}get displayValue(){return this.currentMask?this.currentMask.displayValue:""}get isComplete(){var e;return Boolean(null==(e=this.currentMask)?void 0:e.isComplete)}get isFilled(){var e;return Boolean(null==(e=this.currentMask)?void 0:e.isFilled)}remove(e,t){const s=new b;return this.currentMask&&s.aggregate(this.currentMask.remove(e,t)).aggregate(this._applyDispatch()),s}get state(){var e;return{...super.state,_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map((e=>e.state)),currentMaskRef:this.currentMask,currentMask:null==(e=this.currentMask)?void 0:e.state}}set state(e){const{compiledMasks:t,currentMaskRef:s,currentMask:i,...r}=e;t&&this.compiledMasks.forEach(((e,s)=>e.state=t[s])),null!=s&&(this.currentMask=s,this.currentMask.state=i),super.state=r}extractInput(e,t,s){return this.currentMask?this.currentMask.extractInput(e,t,s):""}extractTail(e,t){return this.currentMask?this.currentMask.extractTail(e,t):super.extractTail(e,t)}doCommit(){this.currentMask&&this.currentMask.doCommit(),super.doCommit()}nearestInputPos(e,t){return this.currentMask?this.currentMask.nearestInputPos(e,t):super.nearestInputPos(e,t)}get overwrite(){return this.currentMask?this.currentMask.overwrite:this._overwrite}set overwrite(e){this._overwrite=e}get eager(){return this.currentMask?this.currentMask.eager:this._eager}set eager(e){this._eager=e}get skipInvalid(){return this.currentMask?this.currentMask.skipInvalid:this._skipInvalid}set skipInvalid(e){this._skipInvalid=e}get autofix(){return this.currentMask?this.currentMask.autofix:this._autofix}set autofix(e){this._autofix=e}maskEquals(e){return Array.isArray(e)?this.compiledMasks.every(((t,s)=>{if(!e[s])return;const{mask:i,...r}=e[s];return l(t,r)&&t.maskEquals(i)})):super.maskEquals(e)}typedValueEquals(e){var t;return Boolean(null==(t=this.currentMask)?void 0:t.typedValueEquals(e))}}D.DEFAULTS={...y.DEFAULTS,dispatch:(e,t,s,i)=>{if(!t.compiledMasks.length)return;const r=t.rawInputValue,a=t.compiledMasks.map(((a,o)=>{const u=t.currentMask===a,l=u?a.displayValue.length:a.nearestInputPos(a.displayValue.length,n);return a.rawInputValue!==r?(a.reset(),a.append(r,{raw:!0})):u||a.remove(l),a.append(e,t.currentMaskFlags(s)),a.appendTail(i),{index:o,weight:a.rawInputValue.length,totalInputPositions:a.totalInputPositions(0,Math.max(l,a.nearestInputPos(a.displayValue.length,n)))}}));return a.sort(((e,t)=>t.weight-e.weight||t.totalInputPositions-e.totalInputPositions)),t.compiledMasks[a[0].index]}},d.MaskedDynamic=D;class V extends x{constructor(e){super({...V.DEFAULTS,...e})}updateOptions(e){super.updateOptions(e)}_update(e){const{enum:t,...s}=e;if(t){const e=t.map((e=>e.length)),i=Math.min(...e),r=Math.max(...e)-i;s.mask="*".repeat(i),r&&(s.mask+="["+"*".repeat(r)+"]"),this.enum=t}super._update(s)}_appendCharRaw(e,t){void 0===t&&(t={});const s=Math.min(this.nearestInputPos(0,o),this.value.length),i=this.enum.filter((t=>this.matchValue(t,this.unmaskedValue+e,s)));if(i.length){1===i.length&&this._forEachBlocksInRange(0,this.value.length,((e,s)=>{const r=i[0][s];s>=this.value.length||r===e.value||(e.reset(),e._appendChar(r,t))}));const e=super._appendCharRaw(i[0][this.value.length],t);return 1===i.length&&i[0].slice(this.unmaskedValue.length).split("").forEach((t=>e.aggregate(super._appendCharRaw(t)))),e}return new b({skip:!this.isComplete})}extractTail(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),new A("",e)}remove(e,t){if(void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),e===t)return new b;const s=Math.min(super.nearestInputPos(0,o),this.value.length);let i;for(i=e;i>=0&&!(this.enum.filter((e=>this.matchValue(e,this.value.slice(s,i),s))).length>1);--i);const r=super.remove(i,t);return r.tailShift+=i-e,r}get isComplete(){return this.enum.indexOf(this.value)>=0}}var I;V.DEFAULTS={...x.DEFAULTS,matchValue:(e,t,s)=>e.indexOf(t,s)===s},d.MaskedEnum=V,d.MaskedFunction=class extends y{updateOptions(e){super.updateOptions(e)}_update(e){super._update({...e,validate:e.mask})}};class L extends y{constructor(e){super({...L.DEFAULTS,...e})}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),this._updateRegExps()}_updateRegExps(){const e="^"+(this.allowNegative?"[+|\\-]?":""),t=(this.scale?"("+u(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExp=new RegExp(e+"\\d*"+t),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(u).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(u(this.thousandsSeparator),"g")}_removeThousandsSeparators(e){return e.replace(this._thousandsSeparatorRegExp,"")}_insertThousandsSeparators(e){const t=e.split(this.radix);return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),t.join(this.radix)}doPrepareChar(e,t){void 0===t&&(t={});const[s,i]=super.doPrepareChar(this._removeThousandsSeparators(this.scale&&this.mapToRadix.length&&(t.input&&t.raw||!t.input&&!t.raw)?e.replace(this._mapToRadixRegExp,this.radix):e),t);return e&&!s&&(i.skip=!0),!s||this.allowPositive||this.value||"-"===s||i.aggregate(this._appendChar("-")),[s,i]}_separatorsCount(e,t){void 0===t&&(t=!1);let s=0;for(let i=0;i<e;++i)this._value.indexOf(this.thousandsSeparator,i)===i&&(++s,t&&(e+=this.thousandsSeparator.length));return s}_separatorsCountFromSlice(e){return void 0===e&&(e=this._value),this._separatorsCount(this._removeThousandsSeparators(e).length,!0)}extractInput(e,t,s){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),[e,t]=this._adjustRangeWithSeparators(e,t),this._removeThousandsSeparators(super.extractInput(e,t,s))}_appendCharRaw(e,t){void 0===t&&(t={});const s=t.tail&&t._beforeTailState?t._beforeTailState._value:this._value,i=this._separatorsCountFromSlice(s);this._value=this._removeThousandsSeparators(this.value);const r=this._value;this._value+=e;const n=this.number;let a,o=!isNaN(n),u=!1;if(o){let e;null!=this.min&&this.min<0&&this.number<this.min&&(e=this.min),null!=this.max&&this.max>0&&this.number>this.max&&(e=this.max),null!=e&&(this.autofix?(this._value=this.format(e,this).replace(L.UNMASKED_RADIX,this.radix),u||(u=r===this._value&&!t.tail)):o=!1),o&&(o=Boolean(this._value.match(this._numberRegExp)))}o?a=new b({inserted:this._value.slice(r.length),rawInserted:u?"":e,skip:u}):(this._value=r,a=new b),this._value=this._insertThousandsSeparators(this._value);const l=t.tail&&t._beforeTailState?t._beforeTailState._value:this._value,h=this._separatorsCountFromSlice(l);return a.tailShift+=(h-i)*this.thousandsSeparator.length,a}_findSeparatorAround(e){if(this.thousandsSeparator){const t=e-this.thousandsSeparator.length+1,s=this.value.indexOf(this.thousandsSeparator,t);if(s<=e)return s}return-1}_adjustRangeWithSeparators(e,t){const s=this._findSeparatorAround(e);s>=0&&(e=s);const i=this._findSeparatorAround(t);return i>=0&&(t=i+this.thousandsSeparator.length),[e,t]}remove(e,t){void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),[e,t]=this._adjustRangeWithSeparators(e,t);const s=this.value.slice(0,e),i=this.value.slice(t),r=this._separatorsCount(s.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(s+i));const n=this._separatorsCountFromSlice(s);return new b({tailShift:(n-r)*this.thousandsSeparator.length})}nearestInputPos(e,t){if(!this.thousandsSeparator)return e;switch(t){case i:case r:case n:{const s=this._findSeparatorAround(e-1);if(s>=0){const i=s+this.thousandsSeparator.length;if(e<i||this.value.length<=i||t===n)return s}break}case a:case o:{const t=this._findSeparatorAround(e);if(t>=0)return t+this.thousandsSeparator.length}}return e}doCommit(){if(this.value){const e=this.number;let t=e;null!=this.min&&(t=Math.max(t,this.min)),null!=this.max&&(t=Math.min(t,this.max)),t!==e&&(this.unmaskedValue=this.format(t,this));let s=this.value;this.normalizeZeros&&(s=this._normalizeZeros(s)),this.padFractionalZeros&&this.scale>0&&(s=this._padFractionalZeros(s)),this._value=s}super.doCommit()}_normalizeZeros(e){const t=this._removeThousandsSeparators(e).split(this.radix);return t[0]=t[0].replace(/^(\D*)(0*)(\d*)/,((e,t,s,i)=>t+i)),e.length&&!/\d$/.test(t[0])&&(t[0]=t[0]+"0"),t.length>1&&(t[1]=t[1].replace(/0*$/,""),t[1].length||(t.length=1)),this._insertThousandsSeparators(t.join(this.radix))}_padFractionalZeros(e){if(!e)return e;const t=e.split(this.radix);return t.length<2&&t.push(""),t[1]=t[1].padEnd(this.scale,"0"),t.join(this.radix)}doSkipInvalid(e,t,s){void 0===t&&(t={});const i=0===this.scale&&e!==this.thousandsSeparator&&(e===this.radix||e===L.UNMASKED_RADIX||this.mapToRadix.includes(e));return super.doSkipInvalid(e,t,s)&&!i}get unmaskedValue(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,L.UNMASKED_RADIX)}set unmaskedValue(e){super.unmaskedValue=e}get typedValue(){return this.parse(this.unmaskedValue,this)}set typedValue(e){this.rawInputValue=this.format(e,this).replace(L.UNMASKED_RADIX,this.radix)}get number(){return this.typedValue}set number(e){this.typedValue=e}get allowNegative(){return null!=this.min&&this.min<0||null!=this.max&&this.max<0}get allowPositive(){return null!=this.min&&this.min>0||null!=this.max&&this.max>0}typedValueEquals(e){return(super.typedValueEquals(e)||L.EMPTY_VALUES.includes(e)&&L.EMPTY_VALUES.includes(this.typedValue))&&!(0===e&&""===this.value)}}I=L,L.UNMASKED_RADIX=".",L.EMPTY_VALUES=[...y.EMPTY_VALUES,0],L.DEFAULTS={...y.DEFAULTS,mask:Number,radix:",",thousandsSeparator:"",mapToRadix:[I.UNMASKED_RADIX],min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,scale:2,normalizeZeros:!0,padFractionalZeros:!1,parse:Number,format:e=>e.toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20})},d.MaskedNumber=L;const M={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function T(e,t,s){void 0===t&&(t=M.MASKED),void 0===s&&(s=M.MASKED);const i=m(e);return e=>i.runIsolated((i=>(i[t]=e,i[s])))}d.PIPE_TYPE=M,d.createPipe=T,d.pipe=function(e,t,s,i){return T(t,s,i)(e)},d.RepeatBlock=class extends x{get repeatFrom(){var e;return null!=(e=Array.isArray(this.repeat)?this.repeat[0]:this.repeat===1/0?0:this.repeat)?e:0}get repeatTo(){var e;return null!=(e=Array.isArray(this.repeat)?this.repeat[1]:this.repeat)?e:1/0}constructor(e){super(e)}updateOptions(e){super.updateOptions(e)}_update(e){var t,s,i;const{repeat:r,...n}=p(e);this._blockOpts=Object.assign({},this._blockOpts,n);const a=m(this._blockOpts);this.repeat=null!=(t=null!=(s=null!=r?r:a.repeat)?s:this.repeat)?t:1/0,super._update({mask:"m".repeat(Math.max(this.repeatTo===1/0&&(null==(i=this._blocks)?void 0:i.length)||0,this.repeatFrom)),blocks:{m:a},eager:a.eager,overwrite:a.overwrite,skipInvalid:a.skipInvalid,lazy:a.lazy,placeholderChar:a.placeholderChar,displayChar:a.displayChar})}_allocateBlock(e){return e<this._blocks.length?this._blocks[e]:this.repeatTo===1/0||this._blocks.length<this.repeatTo?(this._blocks.push(m(this._blockOpts)),this.mask+="m",this._blocks[this._blocks.length-1]):void 0}_appendCharRaw(e,t){void 0===t&&(t={});const s=new b;for(let o,u,l=null!=(i=null==(r=this._mapPosToBlock(this.displayValue.length))?void 0:r.index)?i:Math.max(this._blocks.length-1,0);o=null!=(n=this._blocks[l])?n:u=!u&&this._allocateBlock(l);++l){var i,r,n,a;const h=o._appendChar(e,{...t,_beforeTailState:null==(a=t._beforeTailState)||null==(a=a._blocks)?void 0:a[l]});if(h.skip&&u){this._blocks.pop(),this.mask=this.mask.slice(1);break}if(s.aggregate(h),h.consumed)break}return s}_trimEmptyTail(e,t){var s,i;void 0===e&&(e=0);const r=Math.max((null==(s=this._mapPosToBlock(e))?void 0:s.index)||0,this.repeatFrom,0);let n;null!=t&&(n=null==(i=this._mapPosToBlock(t))?void 0:i.index),null==n&&(n=this._blocks.length-1);let a=0;for(let e=n;r<=e&&!this._blocks[e].unmaskedValue;--e,++a);a&&(this._blocks.splice(n-a+1,a),this.mask=this.mask.slice(a))}reset(){super.reset(),this._trimEmptyTail()}remove(e,t){void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length);const s=super.remove(e,t);return this._trimEmptyTail(e,t),s}totalInputPositions(e,t){return void 0===e&&(e=0),null==t&&this.repeatTo===1/0?1/0:super.totalInputPositions(e,t)}get state(){return super.state}set state(e){this._blocks.length=e._blocks.length,this.mask=this.mask.slice(0,this._blocks.length),super.state=e}};try{globalThis.IMask=d}catch{}const P=[{mask:"+374-00-000-000",startsWith:"374",lazy:!1,country:"Armenia"},{mask:"+994-00-000-00-00",startsWith:"994",lazy:!1,country:"Azerbaijan"},{mask:"+375(00)000-00-00",startsWith:"375",lazy:!1,country:"Belarus"},{mask:"+7(000)000-00-00",startsWith:"7",lazy:!1,country:"Russia"},{mask:"+7(600)000-00-00",startsWith:"76",lazy:!1,country:"Kazakhstan"},{mask:"+996(000)000-000",startsWith:"996",lazy:!1,country:"Kyrgyzstan"},{mask:"+992-00-000-0000",startsWith:"992",lazy:!1,country:"Tajikistan"},{mask:"+998-00-000-0000",startsWith:"998",lazy:!1,country:"Uzbekistan"},{mask:"+380(00)000-00-00",startsWith:"38",lazy:!1,country:"Ukraine"},{mask:"+373-0000-0000",startsWith:"373",lazy:!1,country:"Moldova"},{mask:"0000000000000",startsWith:"",country:"unknown"}];class q{static openDropdown=null;constructor(e){this.$select=e,this.placeholder=this.$select.dataset.placeholder,this.defaultText=this.getDefaultText(),this.selectName=this.$select.getAttribute("name"),this.$options=this.$select.querySelectorAll("option"),this.isSearchable=this.$select.hasAttribute("data-searchable"),this.$dropdown=null,this.initialState={},this.init()}init(){this.$select&&(this.saveInitialState(),this.$select.classList.add("hidden"),this.renderDropdown(),this.setupEvents())}saveInitialState(){const e=this.$select.options[this.$select.selectedIndex];this.initialState={selectedText:e.text,selectedValue:e.value}}getDefaultText(){const e=this.$select.querySelector("option[selected]:not([disabled])");return e?e.text:this.placeholder||this.$select.options[this.$select.selectedIndex].text}renderDropdown(){const e=this.$select.disabled;let t;t=this.isSearchable?`\n               <span class="dropdown__input-wrapper">\n                     <span class="icon-chevron"></span>\n               <input type="text" class="dropdown__input" \n                  autocomplete="off" \n                \n                  placeholder="${this.placeholder}" \n                />\n               </span>\n             `:`\n        <button type="button" class="dropdown__button icon-chevron" \n                aria-expanded="false" \n                aria-haspopup="true" \n                ${e?"disabled":""}>\n            <span class="dropdown__button-text">${this.defaultText}</span>\n        </button>\n    `,this.$dropdown=document.createElement("div"),this.$dropdown.classList.add("dropdown"),this.$dropdown.innerHTML=`\n            ${t}\n            <div class="dropdown__body" aria-hidden="true">\n               <div class="dropdown__content">\n                    <ul class="dropdown__list" role="listbox"></ul>\n                </div>\n            </div>\n        `;const s=this.$dropdown.querySelector(".dropdown__list");this.$options.forEach((e=>{const t=e.value,i=e.text,r=e.selected,n=e.disabled,a=document.createElement("li");a.setAttribute("role","option"),a.setAttribute("data-value",t),a.classList.add("dropdown__list-item"),r&&!this.isSearchable&&a.classList.add("selected"),r&&a.setAttribute("aria-checked",!0),n&&a.classList.add("disabled"),n&&a.setAttribute("aria-disabled","true"),a.textContent=i,s.appendChild(a)})),this.$select.after(this.$dropdown)}setupEvents(){const e=this.$dropdown.querySelector(".dropdown__button");e?.addEventListener("click",(e=>{e.stopPropagation();const t=this.$dropdown.classList.contains("visible");this.toggleDropdown(!t)}));const t=this.$dropdown.querySelector(".dropdown__input");if(t?.addEventListener("click",(e=>{e.stopPropagation();const t=this.$dropdown.classList.contains("visible");this.toggleDropdown(!t)})),this.$dropdown.querySelectorAll(".dropdown__list-item").forEach((e=>{e.addEventListener("click",(t=>{t.stopPropagation(),e.classList.contains("disabled")||this.selectOption(e)}))})),this.isSearchable){const e=this.$dropdown.querySelector(".dropdown__input");e.addEventListener("input",(()=>{const t=e.value.toLowerCase(),s=this.$dropdown.querySelectorAll(".dropdown__list-item");s.forEach((e=>{const s=e.textContent,i=s.toLowerCase().includes(t);if(e.style.display=i?"":"none",i&&t.length>0){const i=new RegExp(`(${t})`,"gi");e.innerHTML=s.replace(i,"<mark>$1</mark>")}else e.innerHTML=s;e.classList.remove("selected"),e.setAttribute("aria-checked","false")}));const i=Array.from(s).some((e=>"none"!==e.style.display)),r=this.$dropdown.querySelector(".dropdown__body");i?r.classList.remove("hidden"):r.classList.add("hidden"),this.$select.removeAttribute("name"),e.setAttribute("name",this.selectName)}))}document.addEventListener("click",(()=>this.closeDropdown())),document.addEventListener("keydown",(e=>{"Escape"===e.key&&this.closeDropdown()})),this.$select.closest("form").addEventListener("reset",(()=>this.restoreInitialState())),new MutationObserver((()=>{const e=this.$select.disabled;this.$dropdown.querySelector(".dropdown__button").disabled=e})).observe(this.$select,{attributes:!0,attributeFilter:["disabled"]}),new MutationObserver((e=>{e.forEach((e=>{if("attributes"===e.type&&"disabled"===e.attributeName){const t=e.target,s=t.value,i=t.disabled,r=this.$dropdown.querySelector(`.dropdown__list-item[data-value="${s}"]`);r.classList.toggle("disabled",i),i?r.setAttribute("aria-disabled","true"):r.removeAttribute("aria-disabled")}"attributes"===e.type&&"selected"===e.attributeName&&this.syncSelectedOption()}))})).observe(this.$select,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["selected","disabled"]})}toggleDropdown(e){e&&q.openDropdown&&q.openDropdown!==this&&q.openDropdown.closeDropdown();const t=this.$dropdown.querySelector(".dropdown__body"),s=this.$dropdown.querySelector(".dropdown__list"),i=this.$dropdown.querySelectorAll(".dropdown__list-item"),r=s.scrollHeight>s.clientHeight;if(this.$dropdown.classList.toggle("visible",e),this.$dropdown.querySelector(".dropdown__button")?.setAttribute("aria-expanded",e),t.setAttribute("aria-hidden",!e),e){i.forEach((e=>e.removeAttribute("style"))),q.openDropdown=this,this.$dropdown.classList.remove("dropdown-top");const e=t.getBoundingClientRect(),n=window.innerHeight;e.bottom>n&&this.$dropdown.classList.add("dropdown-top"),s.classList.toggle("has-scroll",r)}else q.openDropdown===this&&(q.openDropdown=null)}closeDropdown(){this.toggleDropdown(!1)}selectOption(e){const t=e.dataset.value,s=e.textContent;if(this.$dropdown.querySelectorAll(".dropdown__list-item").forEach((e=>{e.classList.remove("selected"),e.setAttribute("aria-checked","false")})),e.classList.add("selected"),e.setAttribute("aria-checked","true"),this.$select.setAttribute("name",this.selectName),this.isSearchable){const e=this.$dropdown.querySelector(".dropdown__input");e.removeAttribute("name"),e.value=s}this.$dropdown.querySelector(".dropdown__button")?.classList.add("selected"),this.$dropdown.querySelector(".dropdown__button-text")&&(this.$dropdown.querySelector(".dropdown__button-text").textContent=s),this.$select.value=t,this.$select.dispatchEvent(new Event("change")),this.closeDropdown()}restoreInitialState(){const e=this.initialState;this.$select.value=e.selectedValue,this.$select.dispatchEvent(new Event("change")),this.$dropdown.querySelectorAll(".dropdown__list-item").forEach((e=>{e.classList.remove("selected"),e.setAttribute("aria-checked","false")}));const t=this.$dropdown.querySelector(`.dropdown__list-item[data-value="${e.selectedValue}"]`);if(t&&(t.classList.add("selected"),t.setAttribute("aria-checked","true")),this.isSearchable){const t=this.$dropdown.querySelector(".dropdown__input");t.value=this.placeholder||e.selectedText,t.removeAttribute("name")}this.$select.setAttribute("name",this.selectName);const s=this.$dropdown.querySelector(".dropdown__button-text"),i=this.$dropdown.querySelector(".dropdown__button");s&&(s.textContent=this.placeholder||e.selectedText),i&&i.classList.remove("selected")}syncSelectedOption(){const e=this.$select.options[this.$select.selectedIndex],t=e.value,s=e.text;this.$dropdown.querySelectorAll(".dropdown__list-item").forEach((e=>{e.classList.remove("selected"),e.setAttribute("aria-checked","false")}));const i=this.$dropdown.querySelector(`.dropdown__list-item[data-value="${t}"]`);i.classList.add("selected"),i.setAttribute("aria-checked","true"),this.$dropdown.querySelector(".dropdown__button-text").textContent=s}}if("undefined"!=typeof Fancybox&&null!==Fancybox){const e=new WeakMap;Fancybox.bind("[data-fancybox]",{dragToClose:!1,closeButton:!1,on:{reveal:(t,s)=>{const i=s?.title,r=s.el;if(!r)return;const n=r.querySelector(".popup__title");if(!n)return;e.has(n)||e.set(n,n.textContent.trim());const a=e.get(n);n.textContent=i||a}}}),Fancybox.bind("[data-fancybox-video]",{closeButton:!1,on:{reveal:e=>{const t=e.getSlide(),s=t?.triggerEl;if(!s)return;const i=s.dataset.videoCode,r=s.dataset.ownerId,n=document.querySelector("#vk-video-container");if(i&&r&&n){const e=`https://vk.com/video_ext.php?oid=${r}&id=${i}&hd=2&autoplay=1&mute=0`,t=document.createElement("iframe");t.src=e,t.frameBorder="0",t.allow="autoplay; encrypted-media",t.allowFullscreen=!0,t.width="100%",t.height="100%",n.innerHTML="",n.appendChild(t)}},close:()=>{const e=document.querySelector("#vk-video-container");e&&(e.innerHTML="")}}})}document.addEventListener("DOMContentLoaded",(()=>{function e(){document.body.style.setProperty("--header-height",Math.ceil(document.querySelector(".header__wrapper").offsetHeight)+"px")}(()=>{const e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};function t(){e.any()||window.innerWidth<992?(document.body.classList.remove("_pc"),document.body.classList.add("_touch")):(document.body.classList.remove("_touch"),document.body.classList.add("_pc"))}t(),window.addEventListener("resize",(()=>{t()}))})(),function(e){let t=new Image;t.onload=t.onerror=function(){1==(2==t.height)?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),document.querySelectorAll("input[type='tel']").forEach((e=>{const t=d(e,{mask:P,dispatch:(e,t)=>{const s=(t.value+e).replace(/\D/g,"");return t.compiledMasks.find((e=>0===s.indexOf(e.startsWith)))}});e.addEventListener("focus",(()=>{""===e.value.trim()&&(t.value="+7")})),e.addEventListener("input",(()=>{"8"===e.value&&(t.value="+7"),"9"===e.value&&(t.value="+79")}))})),(()=>{const e=document.querySelectorAll(".before-slider");0!==e.length&&e.forEach((e=>{const t=e.querySelector(".before-slider__input"),s=e.querySelector(".before-slider__after"),i=e.querySelector(".before-slider__button");["input","change"].forEach((e=>{t.addEventListener(e,(e=>{const t=e.target.value;s.style.setProperty("--value",`${t}%`),i.style.left=`calc(${t}% - ${i.getBoundingClientRect().width/2}px)`}))}))}))})(),(()=>{async function e(e){e.preventDefault();const t=e.target,r=t.getAttribute("action"),n=function(e){let t=0;return e.querySelectorAll("[data-required]").forEach((e=>{var i;s(e),e.getAttribute("name")&&(e.matches("[name='email']")&&(i=e.value,!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(i).toLowerCase()))||e.matches("[type='checkbox']")&&!e.checked||""===e.value.trim()||e.matches("[name='message']")&&e.value.trim().length<1||e.matches("[type='tel']")&&!function(e){const t=e.replace(/\D/g,"");return t.length>=10&&/^[1-9]\d{9,14}$/.test(t)}(e.value))&&(function(e){e.classList.add("_error"),e.parentElement.classList.add("_error")}(e),t++)})),t}(t);if(0===n)try{if(t.classList.add("_sending"),!(await fetch(r,{method:"POST",body:new FormData(t)})).ok)throw new Error(" URL,      action  ");t.reset(),i()}catch(n){alert(n.message),i()}finally{t.classList.remove("_sending")}}function t(e){const{target:t}=e;t.classList.contains("_error")&&s(t)}function s(e){e.classList.remove("_error"),e.parentElement.classList.remove("_error")}function i(){Fancybox.getInstance()&&Fancybox.close(!0),Fancybox.show([{src:"#success",type:"inline"}],{dragToClose:!1,closeButton:!1}),ym(99294522,"reachGoal","zayavka")}document.querySelectorAll("form").forEach((t=>{t.classList.contains("configurator")||t.classList.contains("search")||(t.addEventListener("submit",e),t.querySelector('[name="captcha"]')||t.insertAdjacentHTML("beforeend",`<input type="hidden" name="captcha" value="${navigator.userAgent}"/>`))})),document.addEventListener("input",t),document.querySelectorAll("select")?.forEach((e=>{e.addEventListener("change",t)}))})(),document.querySelectorAll("[data-animate]").forEach((e=>{new IntersectionObserver((function(t,s){t[0].isIntersecting&&("number"!=e.dataset.animate||e.classList.contains("animated")||function(e){let t=+e.innerText;e.innerText="0";const s=()=>{const i=t,r=+e.innerText,n=i/20;r<i?(e.innerText=`${Math.ceil(r+n)}`,setTimeout(s,30)):e.innerText=i};s()}(e),e.classList.add("animated"))})).observe(e)})),(()=>{const e=document.querySelector(".header__wrapper");e&&new ResizeObserver((()=>{document.body.style.setProperty("--header-height",`${e.offsetHeight}px`)})).observe(e);const t=document.querySelector(".header"),s=document.createElement("div");Object.assign(s.style,{position:"absolute",top:"0",height:"1px",width:"1px",opacity:"0",pointerEvents:"none"}),document.body.prepend(s),new IntersectionObserver((e=>{t.classList.toggle("scroll",!e[0].isIntersecting)})).observe(s);const i=document.querySelector(".sale-banner");if(i){const e=i.querySelector(".sale-banner__wrapper"),t=i.querySelector(".sale-banner__close"),s=i.querySelector(".sale-banner__btn"),r="sale-banner-closed",n=()=>{i.classList.remove("visible"),sessionStorage.setItem(r,"true"),setTimeout((()=>{e&&(e.style.transform="")}),300)};if(sessionStorage.getItem(r)||setTimeout((()=>{i.classList.add("visible")}),3e3),t?.addEventListener("click",(e=>{e.preventDefault(),n()})),s?.addEventListener("click",(()=>{sessionStorage.setItem(r,"true")})),i.addEventListener("click",(e=>{e.target===i&&n()})),e){let t=0,s=0,r=!1;e.addEventListener("touchstart",(s=>{i.classList.contains("visible")&&(t=s.touches[0].clientY,r=!0,e.style.transition="none")}),{passive:!0}),e.addEventListener("touchmove",(i=>{if(!r)return;s=i.touches[0].clientY;const n=s-t;n>0&&(e.style.transform=`translateY(${n}px)`)}),{passive:!0}),e.addEventListener("touchend",(()=>{if(!r)return;r=!1;const i=s-t;e.style.transition="",i>100?(e.style.transform="translateY(calc(100% + 50px))",setTimeout(n,300)):e.style.transform=""}))}}})(),window.onload=function(){var e,t=(e=document.cookie.match(new RegExp("(?:^|; )"+"cookie_notice".replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(e[1]):void 0;if(void 0===t||1!=t){var s=document.createElement("div");s.classList.add("cookie","cookie--hidden"),s.innerHTML='<div class="cookie__text">   cookie,   &nbsp;.   ,    <a href="/privacy#cookies" target="_blank">  cookie</a>.</div><button type="button" class="cookie__accept btn btn-white-outline btn-sm"></button>',document.body.appendChild(s),setTimeout((()=>{s.classList.remove("cookie--hidden")}),3e3),document.querySelector(".cookie__accept").addEventListener("click",(function(){!function(e,t,s){var i=(s=s||{}).expires;if("number"==typeof i&&i){var r=new Date;r.setTime(r.getTime()+1e3*i),i=s.expires=r}i&&i.toUTCString&&(s.expires=i.toUTCString());var n="cookie_notice="+(t=encodeURIComponent(t));for(var a in s){n+="; "+a;var o=s[a];!0!==o&&(n+="="+o)}document.cookie=n}(0,1,{expires:15552e3,path:"/"}),s.classList.add("cookie--hidden"),setTimeout((()=>{s.remove()}),500)}))}},(()=>{if(0==document.querySelectorAll(".configurator__block-input").length)return;let e=()=>{let e=document.querySelector("[data-photometric]"),t=document.querySelector("[data-specification]"),s=t.closest(".configurator__side-list");e.classList.contains("hidden")&&t.classList.contains("hidden")?s.classList.add("hidden"):s.classList.remove("hidden")},t=()=>{document.querySelectorAll('input[name="led"]').forEach((e=>{e.parentNode.classList.remove("hidden")}))},s=()=>{let e=[];["code","optics","led"].forEach((t=>{let s=document.querySelector(`.configurator__block-input[name="${t}"]:checked`);s&&e.push(s.value)}));let t=e.join("-");document.querySelector(".configurator__number").textContent=t};function i(e){const t={:"A",:"a",:"B",:"b",:"V",:"v",:"G",:"g",:"D",:"d",:"E",:"e",:"Yo",:"yo",:"Zh",:"zh",:"Z",:"z",:"I",:"i",:"Y",:"y",:"K",:"k",:"L",:"l",:"M",:"m",:"N",:"n",:"O",:"o",:"P",:"p",:"R",:"r",:"S",:"s",:"T",:"t",:"U",:"u",:"F",:"f",:"Kh",:"kh",:"Ts",:"ts",:"Ch",:"ch",:"Sh",:"sh",:"Shch",:"shch",:"",:"",:"Y",:"y",:"",:"",:"E",:"e",:"Yu",:"yu",:"Ya",:"ya"};let s="";for(const i of e)s+=void 0!==t[i]?t[i]:i;return s}document.querySelectorAll(".configurator__block-input").forEach((r=>{r.addEventListener("change",(r=>{let n=r.target,a=n.closest(".configurator__block"),o=n.closest(".configurator__block-options").querySelectorAll(".configurator__block-input"),u=a.nextElementSibling,l=a.nextElementSibling;for(;l;)l.querySelectorAll(".configurator__block-input").forEach((e=>{e.checked=!1})),l.classList.remove("active"),l=l.nextElementSibling;n.checked&&(o.forEach((e=>{e!==n&&(e.checked=!1)})),u&&u.classList.add("active"));let h=n.getAttribute("name"),d="code"===h?n.value:n.nextElementSibling.textContent,c=document.querySelector(`.configurator__side-item[data-row="${h}"]`);"code"===h?(n.checked&&(document.getElementById("product-name").textContent=d,c.classList.add("active"),c.querySelector(".configurator__side-value").textContent=d),s(),t()):"optics"===h?(n.checked&&(c.classList.add("active"),c.querySelector(".configurator__side-value").textContent=n.nextElementSibling.textContent),s(),n.hasAttribute("data-filter")&&((e=null)=>{if(t(),!e||!e.checked)return;let s=e.getAttribute("data-filter");s&&""!==s&&"[]"!==s&&(s=s.replace(/[\[\]]/g,"").split(",").map((e=>e.trim())),document.querySelectorAll('input[name="led"]').forEach((e=>{let t=e.getAttribute("value");s.includes(t)?e.parentNode.classList.add("hidden"):e.parentNode.classList.remove("hidden")})))})(n)):(n.checked&&(c.classList.add("active"),c.querySelector(".configurator__side-value").textContent=d),s()),(e=>{let t=document.querySelector(`.configurator__side-item[data-row="${e}"]`);document.querySelectorAll(`input[name="${e}"]:checked`).length>0?t.classList.add("active"):(t.classList.remove("active"),t.querySelector(".configurator__side-value").textContent="");let s=t.nextElementSibling;for(;s;)s.classList.remove("active"),s.querySelector(".configurator__side-value").textContent="",s=s.nextElementSibling})(h),(()=>{let t=document.getElementById("configurator-props");document.querySelectorAll(".configurator__block-input:checked").length>0?t.classList.add("active"):t.classList.remove("active");let s=document.querySelector('input[name="code"]:checked'),r=document.querySelector('input[name="optics"]:checked'),n=document.querySelector('input[name="led"]:checked'),a=document.querySelector("[data-photometric]"),o=document.querySelectorAll('.configurator__block-input:not([name="code"]):not([name="optics"]):not([name="led"]):checked').length>0;if(s&&r&&n&&!o){let t=i(s.value.replace(/\s/g,"_")),o=i(r.value),u=i(n.value);fetch(`/photometric_data/?art_no=${t}_${o}_${u}&check=Y`).then((e=>e.json())).then((s=>{!0===s?(a.classList.remove("hidden"),a.querySelector(".configurator__side-link").href=`/photometric_data/?art_no=${t}_${o}_${u}`,console.log(`: /ies/${t}/${t}_${o}_${u}.ies`)):(a.classList.add("hidden"),a.querySelector(".configurator__side-link").href=""),e()})).catch((t=>{console.error("Error checking file:",t),a.classList.add("hidden"),a.querySelector(".configurator__side-link").href="",e()}))}else o||(a.classList.add("hidden"),a.querySelector(".configurator__side-link").href=""),e();const u=Array.from(document.querySelectorAll(".configurator__block")).filter((e=>e.querySelector('.configurator__block-input:not([name="ext"])'))),l=document.querySelector("[data-specification]");let h=!0;u.forEach((e=>{const t=e.querySelectorAll(".configurator__block-input");Array.from(t).some((e=>e.checked))||(h=!1)})),h?l.classList.remove("hidden"):l.classList.add("hidden"),e()})()})),r.checked?r.dispatchEvent(new Event("change")):r.checked=!1}))})(),document.querySelectorAll(".select")?.forEach((e=>{new q(e)})),document.addEventListener("click",(e=>{const t=e.target;if((t.closest(".icon-menu")||t.classList.contains("menu")&&document.querySelector(".header").classList.contains("open-menu"))&&(document.body.classList.toggle("lock"),document.querySelector(".header").classList.toggle("open-menu")),t.classList.contains("banner__close")&&t.closest(".banner").classList.add("banner-hidden"),t.classList.contains("promo__btn")){const e=document.getElementById("feedback").querySelector("form").querySelector("input");e&&setTimeout((()=>{e.focus()}),1e3)}if(t.classList.contains("product-info__nav-link")){document.querySelectorAll(".product-info__nav-link").forEach((e=>e.classList.remove("active"))),document.querySelectorAll(".product-info__block").forEach((e=>e.classList.remove("active")));let e=function(e){for(var t=e.parentNode.childNodes,s=0,i=0;i<t.length;i++){if(t[i]==e)return s;1==t[i].nodeType&&s++}return-1}(t.parentNode);document.querySelectorAll(".product-info__nav-link")[e].classList.add("active"),document.querySelectorAll(".product-info__block")[e].classList.add("active")}if(t.matches(".configurator__side-btn")){let e=Fancybox.getInstance(),t=document.querySelector(".configurator"),s=new FormData(t);const i={};s.forEach(((e,t)=>{i[t]=e}));const r=JSON.stringify(i);e.on("done",(function(){let t=e.container.querySelector(".popup__form"),s=document.createElement("input");s.type="hidden",s.name="configurator-data",s.value=r,t.appendChild(s)})),e.on("close",(function(){document.querySelector('[name="configurator-data"]').remove()}))}})),document.querySelector(".products__slider")&&new Swiper(".products__slider",{slidesPerView:"auto",spaceBetween:16,grabCursor:!0,navigation:{nextEl:".products__next",prevEl:".products__prev"},breakpoints:{991.98:{spaceBetween:42}}}),document.querySelector(".reviews__slider")&&new Swiper(".reviews__slider",{slidesPerView:1,navigation:{nextEl:".reviews__next",prevEl:".reviews__prev"}}),document.querySelector(".blog__slider")&&new Swiper(".blog__slider",{slidesPerView:"auto",spaceBetween:16,grabCursor:!0,navigation:{nextEl:".blog__next",prevEl:".blog__prev"},breakpoints:{1199.98:{spaceBetween:24}}}),document.querySelector(".project__slider")&&new Swiper(".project__slider",{slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},navigation:{nextEl:".project__next",prevEl:".project__prev"},pagination:{el:".project__pagination",clickable:!0}}),document.querySelector(".projects__slider")&&new Swiper(".projects__slider",{slidesPerView:"auto",navigation:{nextEl:".projects__next",prevEl:".projects__prev"},spaceBetween:12,grabCursor:!0,breakpoints:{767.98:{slidesPerView:2,spaceBetween:16},1199.98:{slidesPerView:2,spaceBetween:100}}}),document.querySelectorAll(".product-info__slider").length>0&&document.querySelectorAll(".product-info__slider").forEach((e=>{let t=e.closest(".product-info__block"),s=t.querySelector(".product-info__block-prev"),i=t.querySelector(".product-info__block-next");new Swiper(e,{slidesPerView:"auto",navigation:{nextEl:i,prevEl:s},spaceBetween:12,grabCursor:!0,breakpoints:{767.98:{slidesPerView:"auto",spaceBetween:20},1199.98:{slidesPerView:4,spaceBetween:20}}})})),document.querySelector(".product-info__navbar")&&new Swiper(".product-info__navbar",{slidesPerView:"auto",grabCursor:!0,slideToClickedSlide:!0}),window.addEventListener("scroll",(function(t){e()})),e();const t=document.querySelector(".header");new IntersectionObserver((function(e,s){e[0].isIntersecting?t.classList.remove("scroll"):t.classList.add("scroll")})).observe(t);const s=document.querySelector(".widgets");if(s){function c(){window.scrollY>300?s.classList.add("visible"):s.classList.remove("visible")}window.addEventListener("scroll",c),c()}if(document.querySelector("[data-product]")){const p=document.querySelectorAll('input[name="case-color"]'),m=document.querySelectorAll('input[name="led-color"]'),g=document.querySelector(".product-card__image img"),_=document.querySelector(".product-card__image source");function f(){const e=document.querySelector('input[name="case-color"]:checked').value,t=document.querySelector('input[name="led-color"]:checked').value;if("undefined"==typeof productImageData||null==productImageData)return;let s=productImageData[e+"_"+t];const i=s.png,r=s.webp;g.src=i,_&&(_.srcset=r)}function k(){const e=Array.from(p).map((e=>e.value)),t=Array.from(m).map((e=>e.value)),s=document.createElement("div");s.style.display="none",document.body.appendChild(s),e.forEach((e=>{t.forEach((t=>{const i=document.createElement("img"),r=document.createElement("source");if("undefined"==typeof productImageData||null==productImageData)return;let n=productImageData[e+"_"+t];i.src=n.png,r.srcset=n.webp,s.appendChild(i),s.appendChild(r)}))})),setTimeout((()=>{document.body.removeChild(s)}),3e3)}p.forEach((e=>{e.addEventListener("change",f)})),m.forEach((e=>{e.addEventListener("change",f)})),f(),k()}const i=document.querySelectorAll(".product-card__colors");i.length>0&&i.forEach((e=>{const t=e.querySelector(".product-card__colors-current");e.querySelectorAll(".product-card__colors-item").forEach((s=>{const i=s.querySelector(".product-card__colors-btn"),r=s.querySelector("input");i.addEventListener("mouseenter",(function(){t.textContent=i.getAttribute("title")})),i.addEventListener("mouseleave",(function(){const s=e.querySelector(".product-card__colors-input:checked").nextElementSibling;t.textContent=s.getAttribute("title")})),r.addEventListener("change",(function(){const e=r.nextElementSibling;t.textContent=e.getAttribute("title")}))}))}));const r=document.querySelector('select[name="type"]'),n=document.querySelector("fieldset#building-fields"),a=document.querySelector("fieldset#bridge-fields"),o=document.querySelector("fieldset#monument-fields"),u=document.querySelector("fieldset#park-fields"),l=document.querySelector("fieldset#street-fields"),h=document.querySelector("fieldset#custom-option-fields");r?.addEventListener("change",(()=>{switch(n?.setAttribute("inert","true"),a?.setAttribute("inert","true"),o?.setAttribute("inert","true"),u?.setAttribute("inert","true"),l?.setAttribute("inert","true"),h?.setAttribute("inert","true"),n?.setAttribute("disabled","true"),a?.setAttribute("disabled","true"),o?.setAttribute("disabled","true"),u?.setAttribute("disabled","true"),l?.setAttribute("disabled","true"),h?.setAttribute("disabled","true"),r.value){case"":n?.removeAttribute("inert"),n?.removeAttribute("disabled");break;case"":a?.removeAttribute("inert"),a?.removeAttribute("disabled");break;case"":o?.removeAttribute("inert"),o?.removeAttribute("disabled");break;case"/":u?.removeAttribute("inert"),u?.removeAttribute("disabled");break;case"":l?.removeAttribute("inert"),l?.removeAttribute("disabled");break;case" /":h?.removeAttribute("inert"),h?.removeAttribute("disabled")}}))}))})();